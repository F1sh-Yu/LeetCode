# 字符串转换整数

> 请你来实现一个 atoi 函数，使其能将字符串转换成整数。
>
> 首先，该函数会根据需要丢弃无用的开头空格字符，直到寻找到第一个非空格的字符为止。接下来的转化规则如下：
>
> 如果第一个非空字符为正或者负号时，则将该符号与之后面尽可能多的连续数字字符组合起来，形成一个有符号整数。
> 假如第一个非空字符是数字，则直接将其与之后连续的数字字符组合起来，形成一个整数。
> 该字符串在有效的整数部分之后也可能会存在多余的字符，那么这些字符可以被忽略，它们对函数不应该造成影响。
> 注意：假如该字符串中的第一个非空格字符不是一个有效整数字符、字符串为空或字符串仅包含空白字符时，则你的函数不需要进行转换，即无法进行有效转换。
>
> 在任何情况下，若函数不能进行有效的转换时，请返回 0 。
>
> 提示：
>
> 本题中的空白字符只包括空格字符 ' ' 。
> 假设我们的环境只能存储 32 位大小的有符号整数，那么其数值范围为 [−231,  231 − 1]。如果数值超过这个范围，请返回  INT_MAX (231 − 1) 或 INT_MIN (−231) 。

首先来分析一下转换的过程：

1. 去除空格（必需）
2. 判断第一个字符的成分
   - 数字，则该字符串必定有效，继续寻找其后所有的数字成分即可。
   - 正负号，如果后续有数字，则找出所有数字，如果没数字，则为无效字符串。
   - 其它成分，无效字符串。
3. 将找到的子字符串转换为数字
4. 判断数字是否越界，然后进行输出

可以看出这道题的难点就在于第二步，找出需要转换的字符串，这个字符串的成分（正负号和数字）和位置（第一个非空字符）都有限制，所有不符合的都视为0，因此考虑使用正则表达式直接寻找子字符串。

子字符串由可有可无的正负号和必需的数字成分组成，所以得到匹配模式为`[+-]?\d+`，同时必须匹配到第一个非空字符开始的字符串，所以使用`Matcher`类中的`lookingAt()`进行判断。

转换数字使用的是`Integer`类的`parseInt()`函数，要注意的是，`parseInt()`可以识别字符串中的正负号，无需自加判断，使用`try/catch`来实现当数字越界时的输出。

代码如下：

```java
import java.util.regex.*;

class Solution {
    public int myAtoi(String str) {
        str = str.trim();
        Pattern r = Pattern.compile("[+-]?\\d+");
        Matcher m = r.matcher(str);
        if(m.lookingAt()){
            try{
                return Integer.parseInt(m.group(0));
            } catch (NumberFormatException nfe) {
                return m.group(0).charAt(0) == '-' ? Integer.MIN_VALUE : Integer.MAX_VALUE;
            }
        }
        return 0;
    }
}
```

