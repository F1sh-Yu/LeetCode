# 数组中数字出现的次数

> 一个整型数组 `nums` 里除两个数字之外，其他数字都出现了两次。请写程序找出这两个只出现一次的数字。要求时间复杂度是O(n)，空间复杂度是O(1)。

这道题最大的限制就是空间复杂度为O(1)，因此放弃哈希表，考虑使用异或办法，如果对数组中所有的数字进行异或，最终得到的就是**只出现一次的两个数字的异或结果**，其它的数字都会互相抵消，要考虑的就是从这个结果中把两个数字分离出来。

如果一个数组中只有一个数字出现一次，就是[只出现一次的数字](./只出现一次的数字.md)，那么把这里的数组看作是两个"只出现一次的数字"问题的集合，将数组分成两组，每组各包含一个数字即可。

如何分组，只需要找到两个数字的不同就可以了，因为剩下的数字都是出现两次的，相同的数字肯定会分到同一组互相抵消。两个数字的不同，也就是异或之后为1的部分，这里就用到了前面求到的异或结果，找出异或结果为1的最低位，利用这一位来对数组进行分组即可。

代码如下：

```java
class Solution {
    public int[] singleNumbers(int[] nums) {
        int ret = 0;
        for(int num:nums)ret ^= num;
        int a=0,b=0;
        int t = 1;
        while((t & ret)==0)t<<=1;
        for(int num:nums){
            if((num&t)>0)a^=num;
            else b^=num;
        }
        return new int[]{a,b};
    }
}
```

