# 有效的数独

> 判断一个 9x9 的数独是否有效。只需要根据以下规则，验证已经填入的数字是否有效即可。
>
> 数字 1-9 在每一行只能出现一次。
> 数字 1-9 在每一列只能出现一次。
> 数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。
>
> 数独部分空格内已填入了数字，空白格用 `'.'` 表示。
>
> 示例 1:
>
> ```
> 输入:
> [
>   ["5","3",".",".","7",".",".",".","."],
>   ["6",".",".","1","9","5",".",".","."],
>   [".","9","8",".",".",".",".","6","."],
>   ["8",".",".",".","6",".",".",".","3"],
>   ["4",".",".","8",".","3",".",".","1"],
>   ["7",".",".",".","2",".",".",".","6"],
>   [".","6",".",".",".",".","2","8","."],
>   [".",".",".","4","1","9",".",".","5"],
>   [".",".",".",".","8",".",".","7","9"]
> ]
> ```
>
>
> 输出: true

## 解题思路

对于数独中的每一个数字，要分别判断三次，同行是否存在，同列是否存在，以及同九宫格是否存在重复，最简单的办法就是对整个数独遍历三次，分别判断行、列、九宫格是否存在重复。

为了减少遍历次数，可以采取用空间换时间的办法。只要将当前行、当前列以及当前九宫格出现过的数字保存起来，就可以一次判断完三种重复的可能。因为仅仅是判断重复，可以采用`Set`的结构，这样对于行列和九宫格的判断都需要一个`Set`数组，且数组大小为9。

当然，考虑到数字出现的可能性只有1-9这九种，也可以选择用数组来代替`Set`，这样可以提高检索的速度，总共就需要三个二维数组，尺寸都是`3x3`，一维表示行号、列号和九宫格号，二维表示的是数字的值。

还要考虑的一点就是将每个数字对应到它所在的九宫格，可以得到一个公式`BoxIndex = (i/3)*3+j/3`。

## 代码

```java
class Solution {
    public boolean isValidSudoku(char[][] board) {
        int[][] row = new int[9][9];
        int[][] vol = new int[9][9];
        int[][] box = new int[9][9];
        for(int i=0;i<9;i++){
            for(int j=0;j<9;j++){
                if(Character.isDigit(board[i][j])){
                    int num = board[i][j]-'1';
                    int boxindex = (i / 3) * 3 + j / 3;
                    if(row[i][num]!=0 || vol[j][num]!=0 || box[boxindex][num]!=0)
                        return false;
                    else row[i][num]=vol[j][num]=box[boxindex][num]=1;
                }
            }
        }
        return true;
    }
}
```

