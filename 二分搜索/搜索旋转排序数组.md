# ğŸŒŸæœç´¢æ—‹è½¬æ’åºæ•°ç»„

> å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚
>
> ( ä¾‹å¦‚ï¼Œæ•°ç»„ [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] )ã€‚
>
> æœç´¢ä¸€ä¸ªç»™å®šçš„ç›®æ ‡å€¼ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1 ã€‚
>
> ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚
>
> ä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ O(log n) çº§åˆ«ã€‚

## è§£é¢˜æ€è·¯

### æ–¹æ³•ä¸€

å› ä¸ºé¢˜ç›®æœ‰å¤æ‚åº¦O(log n)è¦æ±‚ï¼Œè€ƒè™‘ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œä½†æ˜¯äºŒåˆ†æŸ¥æ‰¾é’ˆå¯¹çš„æ˜¯æœ‰åºæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³åŠæ³•æŠŠæœç´¢èŒƒå›´é™å®šåœ¨æœ‰åºéƒ¨åˆ†é‡Œé¢ã€‚

æœ€ç®€å•çš„å°±æ˜¯ç›´æ¥æ‰¾åˆ°æ—‹è½¬éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„ä¸­çš„æœ€å°å€¼ï¼Œå°†æ•´ä¸ªæ•°ç»„åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œæ ¹æ®`target`çš„å¤§å°ï¼Œåœ¨å…¶ä¸­ä¸€éƒ¨åˆ†ä¸­ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚

å› ä¸ºäºŒåˆ†æŸ¥æ‰¾çš„éƒ¨åˆ†å°±æ˜¯æ™®é€šçš„å¯¹æ•°ç»„è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ¨¡ç‰ˆï¼Œæ‰€ä»¥ç®—æ³•çš„éš¾ç‚¹åœ¨äºå¯»æ‰¾æœ€å°å€¼çš„éƒ¨åˆ†ï¼Œæ ¹æ®å¤æ‚åº¦çš„è¦æ±‚ï¼Œå¯»æ‰¾æœ€å°å€¼ä¹Ÿå¿…é¡»ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚

æœ€å°å€¼çš„åˆ¤å®šæ ‡å‡†å°±æ˜¯`nums[mid]>nums[mid+1]`ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„æœ€å°å€¼å°±æ˜¯ç´¢å¼•`mid+1`ï¼Œæ­¤å¤„ä¸å¯å°†`mid`ä¸`mid-1`æ¯”è¾ƒï¼Œå› ä¸º`mid`å¯èƒ½ä¼šä¸º0ï¼Œå‡ä¸€ä¹‹åä¼šå‡ºç°æº¢å‡ºé”™è¯¯ã€‚å¦‚æœ`mid`å¤§äºæ•°ç»„çš„æœ€åä¸€ä¸ªæ•°ï¼Œè¯´æ˜`mid`å¤„äºå·¦åŠè¾¹æœ‰åºæ•°ç»„ï¼Œæ­¤æ—¶æœ€å°å€¼è¢«`mid`å’Œ`nums.length-1`å¤¹åœ¨ä¸­é—´ï¼Œå¦åˆ™`mid`å¤„äºå³åŠè¾¹æœ‰åºæ•°ç»„ï¼Œæ­¤æ—¶æœ€å°å€¼è¢«`0`å’Œ`mid`å¤¹åœ¨ä¸­é—´ï¼Œä½†è¦æ³¨æ„ï¼Œ**`mid`ä¹Ÿå¯èƒ½æ˜¯æœ€å°å€¼**ï¼Œè¦åŒ…æ‹¬è¿›å»ã€‚

### ä»£ç 

```java
class Solution {
    public int search(int[] nums, int target) {
        if(nums.length==0)return -1;
        int first = nums.length==1?0:find(nums,0,nums.length-1);
        if(target<nums[first])return -1;
        if(target<=nums[nums.length-1])return binarysearch(nums,target,first,nums.length-1);
        else return binarysearch(nums,target,0,first-1);
    }
    
    public int find(int[]nums,int left,int right){
        if(left>=right)return left;
        int mid = left + (right-left)/2;
        if(nums[mid]>nums[mid+1])return mid+1;
        else if(nums[mid]>=nums[nums.length-1])return find(nums,mid+1,right);
        else return find(nums,left,mid);
    }

    public int binarysearch(int[] nums,int target,int left,int right){
        if(left>right)return -1;
        int mid = left + (right-left)/2;
        if(nums[mid]==target)return mid;
        else if(nums[mid]>target)return binarysearch(nums,target,left,mid-1);
        else return binarysearch(nums,target,mid+1,right);
    }
}
```

### æ–¹æ³•äºŒ

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­åŠ¨æ€çš„å¯»æ‰¾æœ‰åºæ•°ç»„ã€‚

é¦–å…ˆå°†`nums[mid]`ä¸`nums[left]`è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¤§äºï¼Œåˆ™è¯´æ˜`nums[mid]`å¤„äºå·¦æ®µçš„æœ‰åºã€‚ï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½`left`æœ¬èº«å°±å¤„äºå³æ®µï¼Œé‚£ä¹ˆ`mid`ä¹Ÿæ˜¯å³æ®µï¼Œä½†è¿™ç§æƒ…å†µä¸‹`[left,mid]`ä¹Ÿæ˜¯æœ‰åºæ•°ç»„ï¼ŒåŒæ ·é€‚ç”¨ã€‚ï¼‰æ­¤æ—¶ï¼Œæˆ‘ä»¬è§‚å¯Ÿ`target`æ˜¯å¦å¤„äº`[left,mid]`ä¹‹é—´ï¼Œå¦‚æœæ˜¯ï¼Œå°±å¯¹å·¦ä¾§çš„æœ‰åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚ä¸æ˜¯çš„è¯ï¼Œå°±åœ¨`[mid+1,right]`ä¹‹é—´ç»§ç»­å¯»æ‰¾æœ‰åºæ•°ç»„ã€‚

å¦‚æœ`nums[mid]`å°äº`nums[left]`ï¼Œé‚£å°±è¯´æ˜`mid`å¿…åœ¨å³æ®µï¼Œæˆ‘ä»¬åˆ¤æ–­`target`æ˜¯å¦å¤„äº`[mid,right]`ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å¯¹å³ä¾§çš„æœ‰åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¦åˆ™ï¼Œå°±åœ¨`[left,mid-1]`ä¹‹é—´å¯»æ‰¾æœ‰åºæ•°ç»„ã€‚

### ä»£ç 

```java
class Solution {
    public int search(int[] nums, int target) {
        int left=0,right=nums.length-1;
        while(left<=right){
            int mid=left + (right-left)/2;
            if(nums[mid]==target)return mid;
            if(nums[mid]>=nums[left]){
                if(target>=nums[left] && target<=nums[mid])right=mid-1;
                else left= mid+1;
            }
            else {
                if(target>=nums[mid] && target<=nums[right])left=mid+1;
                else right = mid-1;
            }
        }
        return -1;
    }
}
```



